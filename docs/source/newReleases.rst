Release Notes for version 2.4.3
===================================

ВЕРСИЯ СБОРКИ
------------------------------------

Версия  SafeInspect - 2.4.3.2959.

Предыдущая версия: 2.4.3.808. 
С основными изменениями данной версии можно ознакомиться  в разделе Release Notes по ссылке:  https://www.newinfosec.ru/support/safeinspect/release-notes

ОБЗОР ВЕРСИИ
------------------------------------

Добавлен ряд улучшений работы продукта: обновлен дизайн, ускорена работа сервисов, добавлена возможность переустановки системы через инсталлятор, улучшена работа поиска, расширены возможности сервисов и защитные ограничения во время первичной инсталляции и установки обновлений. Устранены различные ошибки работы программного обеспечения.
   
НОВАЯ ФУНКЦИОНАЛЬНОСТЬ
------------------------------------
* (#044) Создан обработчик VNC протокола для обработки VNC напрямую;
* (#2088) Добавлен протокол RLOGIN с возможностью просмотра видео;
* (#2103) Добавлена возможность выбора «Обновление» или «Переустановка» в инсталляторе при инсталляции продукта из образа ISO;
* (#2043) Реализована синхронизация по матрице доступа между двумя системами SafeInspect, отдельно установленными в разных ЦОД; 
* (#2089) Добавлена возможность загрузки обновлений с сайта www.newinfosec.ru;
* (#2493) Добавлена возможность множественного импорта/экспорта сессий;
* (#1617) Добавлена возможность мониторинга SafeInspect при помощи Zabbix-агента;
* (#2098) Добавлен общий размер всех сессий на диске; 
* (#1751) Реализована возможность отслеживания модулей в изменениях конфигурации; 
* (#1792) Добавлено подключение удаленных хранилищ для видеозаписей по NFS, CIFS;
* (#1775) Реализована возможность настройки нескольких NTP северов;
* (#757) Добавлена возможность последовательного выполнения правил при входящем подключении, добавления в условия правил пользователей или групп;
* (#2153) Реализована возможность совместной работы с Hashicorp Vault;
* (#2299) Добавлена ротация паролей для учетной записи LDAP в сессии по SSH;
* (#2074, #1442) Усовершенствована работа менеджера и коллектора, минимизировано время простоя при обновлении системы: коллектора корректно работают при несовпадении с версией менеджера и обновляют свои версии поочередно. Процедура полностью автоматизирована и вмешательства администратора не требует;
* (#2309) Добавлена возможность управления паролями для MySQL, MsSQL;
* (#1637) Добавлена возможность использования регулярных выражений в сопоставлениях;
* (#1884) Добавлена возможность работы оборудования по SSH с DES шифрованием для совместимости со «старым» оборудованием; 
* (#1782) Добавлена работа по SNMP v3 (в дополнение к SNMP v2).
* (#2408) Добавлена поддержка в GUI протоколов RS232/RS485.
* (#2512, #2465) Переработан алгоритм работы при резервировании менеджеров. Добавлены ограничения в интерфейс, не позволяющие Администратору сделать ошибки.


УЛУЧШЕНИЯ
------------------------------------
* (#1328, #2450) Изменился основной дизайн интерфейса, проведен полный редизайн работы журналов сессий и системных событий;
* (#1917, #1144) Усовершенствован функционал управления серверами резервного копирования в части добавления, удаления и модификации; добавлена возможность назначения расписания резервного копирования (FTP); 
* (#0747) Увеличена скорость синхронизации баз данных основного и резервного менеджера;
* (#2084) Расширена работа системы оповещения;
* (#2120) Дополнена защита от действий администратора в интерфейсе SI во время установки обновлений;
* (#2210) Добавлены изменения в результатах поиска и исключены ошибки при введении специальных символов;
* (#2099) Изменены уровни severity для отдельных генерируемых событий;
* (#2173) Обновлена конфигурация базы данных для ускорения работы;
* (#2156, #2035, #1573, #2045, #2108, #2010, #2171) Расширены возможности работы через API: получение, создание и обновление сопоставления пользовательских групп; возвращение имени коллектора методом search из api_collectors; коды ошибок приведены к фактическим ошибкам; для обработчиков добавлены методы remove и update; реализована возможность сортировки правил; добавлен функционал получения списка правил и обработчиков, добавлено поле creator, добавлены методы add и delete для host groups;
* (#2169) Доработан модуль контроля целостности: настроена работа системы SafeInspect в двух режимах – обычный и строгий, для большей гибкости при работе с устройством;
* (#2157) Добавлены дополнительные проверки корректности сборки дистрибутива;
* (#2263) Изменен инсталлятор: вдвое увеличены разделы /opt, добавлена очистка старых инсталляций, исключены потенциальные проблемы с местом при обновлении и при работе высоконагруженных систем (для полноценного использования требуется полная новая инсталляция системы).


ИСПРАВЛЕННЫЕ ОШИБКИ
------------------------------------
* (#2261) Исправлена обработка недоступности LDAP-сервера в SSH;
* (#2019) Добавлено обязательное уведомление при удалении групп, участвующих в сопоставлениях; 
* (#2015) Исправлена работа сервиса SMTP: исключена необходимость перезагрузки сервиса при применении нового пароля;
* (#1778) Исправлена ошибка переноса сессий на сервер SFTP при включенной синхронизации менеджеров;
* (#2030) Доработана возможность добавления LDAP группы с помощью curl; 
* (#2005) Исправлены ошибки при обновлении пользователя и группы; 
* (#2266) Исправлена работа резервирования менеджеров с включенным Zabbix-агентом;
* (#2123) Исправлена ошибка невозможности удаления недоступного сервера архивирования;
* (#2152) Исправлена ошибка при сохранении изменения в сопоставлении; 
* (#2140) Исправлены ошибки, возникающие при принудительном завершении НTTP сессий;
* (#2197) Исправлены недочеты в работе графического интерфейса в правилах SSH; 
* (#2085) Исправлено некорректное обновление правил через API;
* (#2007) Исправлен сброс состояния модулей после обновления; 
* (#2440) Переработан контроль целостности базы данных, ускорена проверка при обновлении и первом старте.


СИСТЕМНЫЕ ТРЕБОВАНИЯ
------------------------------------

Для инсталляции данной версии должны быть соблюдены следующие минимальные требования к среде виртуализации или аппаратной платформе для функционирования продукта:


+----------------------------------------------------------------+---------------------------------------------------+-----------------------------+
|                            Компонент                           | Минимальные требования для текущей версии продукта| Минимальные требования для  |
|                                                                |                                                   | предыдущих версий продукта  |
+================================================================+===================================================+=============================+
| Оперативная память                                             |              16 Гб                                |            16 Гб            |
+----------------------------------------------------------------+---------------------------------------------------+-----------------------------+
| Дисковое пространство                                          |             120 Гб                                |            80 Гб            |
+----------------------------------------------------------------+---------------------------------------------------+-----------------------------+
| Количество ядер процессора                                     |               6 Гб                                |             6 Гб            |
+----------------------------------------------------------------+---------------------------------------------------+-----------------------------+
| Обязательное количество сетевых интерфейсов  в системе         |               3                                   |              4              |
+----------------------------------------------------------------+---------------------------------------------------+-----------------------------+
| Тип контроллера диска для виртуальной машины в  VMware ESXi    |              SATA                                 |           SATA              |
+----------------------------------------------------------------+---------------------------------------------------+-----------------------------+
| Тип сетевых интерфейсов  для виртуальной машины в  VMware ESXi |   Предпочтителен VMXNET3, Е1000                   |         VMXNET3, E1000      |
+----------------------------------------------------------------+---------------------------------------------------+-----------------------------+
	 	
		
ПОРЯДОК ИНСТАЛЛЯЦИИ И ОСОБЕННОСТИ ОБНОВЛЕНИЯ ПРОДУКТА ДО ТЕКУЩЕЙ ВЕРСИИ
------------------------------------
Для использования всех возможностей данной версии системы, при установке обновлений с предыдущих версий, необходима миграция с новой инсталляцией продукта.  

Предварительно перед апгрейдом, необходимо выключить модуль статистики (в боковом меню перейдите в раздел «Система» → «Модули», в разделе «Модули» необходимо выключить первый переключатель «Статистика» (рисунок 1)).
 

.. warning::

   Ранее сгенерированные видеофайлы сессий необходимо перенести на ваше локальное хранилище и удалить их из Менеджера видео.

.. figure:: https://github.com/Xenia11rus/NTB/blob/039c227257ddf0b0e800e83cc1e5da0b9f1a434b/docs/source/modul.png?raw=true
   :width: 80%
   :align: center
   :alt: Рисунок 1. Модуль статистики

   Рисунок 1. Модуль статистики

Далее необходимо выбрать вариант перехода на новую версию.

1. Вариант предполагает новую инсталляцию продукта и настройку его в соответствии с текущими правилами.  Группы пользователей, группы хостов и другие элементы могут быть экспортированы из старой инсталляции и импортированы в новую в соответствии с руководством Администратора. Если необходимо сохранить и импортировать в новую инсталляцию все сессии, которые были записаны на предыдущей инсталляции, можно воспользоваться возможностью экспорта сессий из старой версии  и в дальнейшем импорта сессий в новую инсталляцию. Инструкция по экспорту – импорту сессий приведена ниже.
2. Вариант предполагает создание резервной копии на старой версии продукта, дальнейшее обновление до новой текущей версии и проверка работоспособности. Данный апгрейд не увеличит дисковое пространство, поэтому в последствии может появиться риск нехватки объема в системных разделах. Поэтому необходимо сделать резервную копию уже на новой версии, и далее установить новую версию с нуля. После установки необходимо восстановить данные из резервной копии. Инструкция по созданию резервной копии и обновлению системы приведена ниже.

.. important::

   Первый вариант является предпочтительным. Порядок инсталляции продукта описан в инструкции по установке. 

.. note::

   Используйте инструкцию «SafeInspect_Инструкция_по_установке_2_4_3_2959+.pdf», соответствующую данной версии продукта.

+----------------------------------------------------------------+---------------------------------------------------------------------------------+
|                           Название инструкции                  |                        Ссылка на документ                                       |
+================================================================+=================================================================================+
| Инструкция по установке                                        |             SafeInspect_Инструкция_по_установке_2_4_3_2959+.pdf                 |
+----------------------------------------------------------------+---------------------------------------------------------------------------------+
| Инструкция по экспорту/импорту сессий                          |             SafeInspect_Инструкция_по_экспорту_импорту_сессий.pdf               |
+----------------------------------------------------------------+---------------------------------------------------------------------------------+
| Инструкция по созданию резервной копии и обновлению системы    |             SafeInspect_Инструкция_по_созданию_бэкапа_и_апгрейду.pdf            |
+----------------------------------------------------------------+---------------------------------------------------------------------------------+
